<%- include ('./layout.ejs') %>

<div class="card">
	<img src="<%= post.featuredImage %>" class="card-img-top" alt="<%= post.title %>">
	<div class="card-body">
		<h2 class="card-title"><%= post.title %></h2>
		<p class="card-text"><%= post.content %></p>
		<p>Keywords: <%= post.keywords %></p>
		<p>Author: <a href="/user/<%= post.username %>"><%= post.username %></a></p>
		<p>Views: <%= post.views %></p>
		<p>Kudos: <%= nKudos %></p>
		<% if(user == post.username) { %>
			<form method="GET" action="/post/<%= post.id %>/edit">
				<button type="submit">Edit</button>
			</form>-->
			<form method="POST" action="/post/<%= post.id %>/delete">
				<button type="submit">Delete</button>
			</form>
		<% } %>
		<% if(user) { %>
			<form method="POST" action="/post/<%= post.id %>/kudos">
				<button <% if(kudos) { %>style="background-color:lime;border-color:lime" <% } %>type="submit">Kudos</button>
			</form>
			<form method="POST" action="/post/<%= post.id %>/comment">
				<label for="content">Comment: </label>
				<input type="text" name="content" id="content">
				<button type="submit">Comment</button>
			</form>
		<% } %>
		<ul>
			<% comments.forEach(function(comment) { %>
				<li>
					<a href="/user/<%= comment.username %>"><p><%= comment.username %></p></a>
					<p><%= comment.content %></p>
				</li>
			<% }); %>
		</ul>
		<p class="card-text"><small class="text-muted">Published on <%= post.createdAt %></small></p>
	</div>
</div>

</body>

</html>